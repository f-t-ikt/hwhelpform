<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>教員用画面</title>
    </head>
    
    <body>
        <p>教員用画面</p>
        <div id="help">
            <p>質問待機中の部屋</p>
        </div>
        <div id="call">
            <p>先生待機中の部屋</p>
        </div>
        
        <script>
            var room = document.getElementById("room");
            var help = document.getElementById("help");
            var call = document.getElementById("call");
            var socket = new WebSocket("ws://" + window.location.host + "/update");
            
            socket.onopen = function() {
                help.innerHTML += "LOAD<br>";
                call.innerHTML += "LOAD<br>";
            };
            
            socket.onmessage = function(e) {
                var post = JSON.parse(e.data);
                if (post.Method == "help") {
                    help.innerHTML += "<div id=" + post.Id + ">" + post.Id + "<button onclick=deletePost(" + post.Id + ",\"Help\")>確認</button>" + "<br>" + "</div>";
                } else if (post.Method == "call") {
                    call.innerHTML += "<div id=" + post.Id + ">" + post.Id + "<button onclick=deletePost(" + post.Id + ",\"Call\")>確認</button>" + "<br>" + "</div>";
                }
            };
            
            function deletePost(id, field) {
                socket.send(JSON.stringify(
                    {
                        Method: "delete" + field,
                        Id: id
                    }
                ));
            };
        </script>
    </body>
</html>